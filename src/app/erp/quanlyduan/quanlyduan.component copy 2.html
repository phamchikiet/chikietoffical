<div class="flex flex-row h-screen w-screen">

  <div class="flex flex-col justify-between {{leftsidebar?'':'hidden'}} bg-slate-50 min-w-14 h-screen overflow-auto p-1">

    <a href="/" mat-icon-button class="hover:bg-slate-200 rounded-full p-2">
      <img src="logo.jpg" class="w-10 hover:bg-slate-50 hover:border-blue-500">
    </a>
    <div class="flex flex-col space-y-2 w-full">
      <button mat-icon-button class="hover:bg-slate-200 rounded-full p-2">
        <span class="material-symbols-outlined">home</span>
      </button>
      <button mat-icon-button class="hover:bg-slate-200 rounded-full p-2">
        <span class="material-symbols-outlined">dashboard</span>
      </button>
      <button mat-icon-button class="hover:bg-slate-200 rounded-full p-2">
        <span class="material-symbols-outlined">folder</span>
      </button>
      <button mat-icon-button class="hover:bg-slate-200 rounded-full p-2" [routerLink]="['/profile']">
        <span class="material-symbols-outlined">account_circle</span>
      </button>
      <button mat-icon-button class="hover:bg-slate-200 rounded-full p-2" (click)="logout()">
        <span class="material-symbols-outlined">logout</span>
      </button>
    </div>
  </div>
  <mat-drawer-container class="lg:w-1/3 w-full h-full border" autosize>
    <mat-drawer #drawer [opened]="isOpen" [mode]="'over'" position="start"
      class="bg-white !flex flex-col !w-full flex-auto min-w-0 relative h-screen">
      <div class="relative flex flex-col h-full overflow-auto">
        <div class="!flex flex-col flex-auto min-w-0 relative">
          <div class="p-4 relative flex flex-col space-y-3">
            @for (item of filteredCategories("top"); track item.id) {
            <a (click)="drawer.toggle()" class="p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            <!-- <a (click)="drawer.toggle()" routerLinkActive="bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a> -->
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
          <div class="p-4 border-y relative flex flex-col space-y-3 h-full w-full overflow-auto">
            <div class="flex flex-row justify-between space-x-2 p-3 hover:bg-blue-100 lg:rounded-lg">
              <div>Danh Sách</div>
              <span class="material-symbols-outlined cursor-pointer"
                (click)="openDialog(dialogTemplate)">add_circle</span>
            </div>
            @for (item of filteredCategories("main"); track item.id) {
            <a (click)="drawer.toggle()"  routerLinkActive="bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
          <div class="p-4 w-full relative flex flex-0 space-y-3">
            @for (item of filteredCategories("bottom"); track item.id) {
            <a routerLinkActive="w-full bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="w-full p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
        </div>
      </div>
    </mat-drawer>

    <mat-drawer-content class="!flex flex-col flex-auto min-w-0 relative !h-screen bg-white">
      <div class="relative flex flex-col h-full overflow-auto">
        <div class="w-full flex flex-row justify-between p-4">
          <button mat-icon-button (click)="drawer.toggle()">
            <span class="material-symbols-outlined">arrow_back</span>
          </button> <span class="text-2xl">{{Category.Title}}</span>
          <span (click)="isOpen1=!isOpen1">Menu</span>
        </div>
       <app-listview></app-listview>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>


  <div class="w-full h-full">
    <router-outlet></router-outlet>
  </div>

  <!-- <mat-drawer-container class="w-full h-full" autosize>
    <mat-drawer #drawer [opened]="isOpen" [mode]="drawerMode" position="start"
      class="bg-white !flex flex-col !w-[300px] flex-auto min-w-0 relative h-screen">
      <div class="relative flex flex-col h-full overflow-auto">
        <div class="!flex flex-col flex-auto min-w-0 relative">
          <div class="p-4 relative flex flex-col space-y-3">
            @for (item of filteredCategories("top"); track item.id) {
            <a routerLinkActive="bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
          <div class="p-4 border-y relative flex flex-col space-y-3 h-full w-full overflow-auto">
            <div class="flex flex-row justify-between space-x-2 p-3 hover:bg-blue-100 lg:rounded-lg">
              <div>Danh Sách</div>
              <span class="material-symbols-outlined cursor-pointer"
                (click)="openDialog(dialogTemplate)">add_circle</span>
            </div>
            @for (item of filteredCategories("main"); track item.id) {
            <a routerLinkActive="bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
          <div class="p-4 w-full relative flex flex-0 space-y-3">
            @for (item of filteredCategories("bottom"); track item.id) {
            <a routerLinkActive="w-full bg-blue-100 rounded-lg" [routerLink]="'list/'+item.Slug"
              class="w-full p-3 hover:bg-blue-100 lg:rounded-lg">{{item.Title}}</a>
            }
            @empty {
            <div>Chư có Dữ Liệu</div>
            }
          </div>
        </div>


      </div>
    </mat-drawer>

    <mat-drawer #drawer1 [opened]="isHaveQuanlyduan" [mode]="'side'" position="end"
      class="bg-white !flex flex-col lg:!w-1/3 !w-full flex-auto min-w-0 relative h-screen">
      <app-detail></app-detail>
    </mat-drawer>

    <mat-drawer-content class="!flex flex-col flex-auto min-w-0 relative !h-screen bg-white">
      <div class="w-full flex flex-row justify-between p-4">
        <button mat-icon-button (click)="drawer.toggle()">
          <span class="material-symbols-outlined">menu</span>
        </button> <span class="text-2xl">{{Category.Title}}</span>
        <span (click)="isOpen1=!isOpen1">Menu</span>
      </div>
      <router-outlet></router-outlet>
    </mat-drawer-content>
  </mat-drawer-container> -->
</div>



<ng-template #dialogTemplate>
  <div class="lg:min-w-[40vw] min-w-[90vw] min-h-[50vh] flex flex-col justify-between space-y-3 p-4">
    <div class="h-full flex flex-col space-y-2">
      <div class="text-center text-xl font-bold">Thêm Mới</div>
      <div class="flex flex-col justify-start w-full space-y-4 p-4">
        <mat-form-field subscriptSizing="dynamic" appearance="outline" class="w-full">
          <mat-label>Tiêu Đề</mat-label>
          <input (input)="ToSlug()" matInput [(ngModel)]="Category.Title" [ngModelOptions]="{standalone: true}"
            placeholder="Tiêu Đề">
        </mat-form-field>

        <mat-form-field subscriptSizing="dynamic" appearance="outline" class="w-full">
          <mat-label>Slug</mat-label>
          <input matInput [(ngModel)]="Category.Slug" [ngModelOptions]="{standalone: true}" placeholder="Slug">
        </mat-form-field>

        <mat-form-field subscriptSizing="dynamic" appearance="outline" class="w-full">
          <mat-select [(ngModel)]="Category.location" [ngModelOptions]="{standalone: true}">
            <mat-option *ngFor="let item of ['top','main','bottom']" [value]="item">
              {{item}}
            </mat-option>
          </mat-select>
        </mat-form-field>


      </div>
    </div>
    <div mat-dialog-actions [align]="'end'" class="justify-center">
      <button mat-flat-button color="warn" mat-dialog-close="false">Huỷ</button>
      <button mat-flat-button color="primary" mat-dialog-close="true">Đồng Ý</button>
    </div>
  </div>
</ng-template>

<ng-template #dialogView>
  <div class="w-full flex flex-col">
    <div mat-dialog-title>Thêm Mới</div>
    <div mat-dialog-content>
      <div class="flex flex-col w-full space-y-4 p-4">
        <mat-form-field subscriptSizing="dynamic" appearance="outline" class="w-full">
          <mat-label>Tiêu Đề</mat-label>
          <input matInput [(ngModel)]="Detail.Title" [ngModelOptions]="{standalone: true}" placeholder="Tiêu Đề">
        </mat-form-field>

        <mat-select [(ngModel)]="Detail.location" [ngModelOptions]="{standalone: true}" subscriptSizing="dynamic"
          appearance="outline" class="w-full">
          <mat-option *ngFor="let item of ['top','main','bottom']" [value]="item">
            {{item}}
          </mat-option>
        </mat-select>
      </div>
    </div>
    <div mat-dialog-actions [align]="'end'" class="justify-center">
      <button mat-flat-button color="warn" mat-dialog-close="false">Huỷ</button>
      <button mat-flat-button color="primary" mat-dialog-close="true">Đồng Ý</button>
    </div>
  </div>
</ng-template>

<ng-template #XoaTeamplate>
  <div class="flex flex-col space-y-3">
    <div mat-dialog-title>Xoá</div>
    <div mat-dialog-content>
      <div class="flex flex-col w-full space-y-4 lg:p-4">
        Bạn chắc chắn muốn Xoá?
      </div>
      <div class="flex flex-row space-x-2 items-center justify-center">
        <button mat-flat-button color="warn" mat-dialog-close="false">Huỷ</button>
        <button mat-flat-button color="primary" mat-dialog-close="true">Đồng Ý</button>
      </div>
    </div>
  </div>
</ng-template>
